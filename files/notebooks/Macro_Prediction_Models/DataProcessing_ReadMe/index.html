<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">


<!-- begin SEO -->









<title>CalculateCharge.ipynb - Home</title>







<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="Home">
<meta property="og:title" content="CalculateCharge.ipynb">


  <link rel="canonical" href="https://SmartTransit.ai/files/notebooks/Macro_Prediction_Models/DataProcessing_ReadMe/">
  <meta property="og:url" content="https://SmartTransit.ai/files/notebooks/Macro_Prediction_Models/DataProcessing_ReadMe/">























<!-- end SEO -->

  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
 

  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
  <link href="https://SmartTransit.ai/css/stylish-portfolio.css" rel="stylesheet">


    

<!-- start custom head snippets -->
<!-- 
<link rel="apple-touch-icon" sizes="57x57" href="https://SmartTransit.ai/images/apple-touch-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="https://SmartTransit.ai/images/apple-touch-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="https://SmartTransit.ai/images/apple-touch-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="https://SmartTransit.ai/images/apple-touch-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="https://SmartTransit.ai/images/apple-touch-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="https://SmartTransit.ai/images/apple-touch-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="https://SmartTransit.ai/images/apple-touch-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="https://SmartTransit.ai/images/apple-touch-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="https://SmartTransit.ai/images/apple-touch-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="https://SmartTransit.ai/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="https://SmartTransit.ai/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="icon" type="image/png" href="https://SmartTransit.ai/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="https://SmartTransit.ai/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="manifest" href="https://SmartTransit.ai/images/manifest.json?v=M44lzPylqQ">
<link rel="mask-icon" href="https://SmartTransit.ai/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="https://SmartTransit.ai/images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="https://SmartTransit.ai/images/browserconfig.xml?v=M44lzPylqQ"> -->

<!-- end custom head snippets -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=UA-178278850-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-178278850-1');
</script> -->
    
    
  </head>

  <body id="page-top">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<div class="container-fluid align-left  bg-dark text-white" id="banner">
  <div class="row">
    <div class="col-12 masthead2">
      <h3 class="mdc-typography--headline3 p-2" ><a href="https://SmartTransit.ai/">SmartTransit.ai </a>
       <div class="d-none d-lg-inline"> - Optimizing Multi-modal Mixed Fleet Transit Operations</div></h3> 
    </div>
</div>
</div>
 



  <!-- This finds the current page so it can be highlighted. -->



    
        
    


    


    


    


    


    


    


    


<!-- Navigation -->
<a class="menu-toggle rounded" href="#">
  <i class="fas fa-bars"></i>
</a>
<!-- Then we build the nav bar. -->
<nav id="sidebar-wrapper">
    <ul  class="sidebar-nav">
    
        
            
        
        
        
        <li class="sidebar-nav-item">
            <a  class="js-scroll-trigger text-primary"  href="/">Home</a>
            <ul>
                
                <li class="sidebar-nav-item text-white"><a  class="js-scroll-trigger"  href="/#aboutus">About Us</a></li>
                
                <li class="sidebar-nav-item text-white"><a  class="js-scroll-trigger"  href="/#research">Focus Areas</a></li>
                
                <li class="sidebar-nav-item text-white"><a  class="js-scroll-trigger"  href="/#team">Team</a></li>
                
                <li class="sidebar-nav-item text-white"><a  class="js-scroll-trigger"  href="/#activities">Activities</a></li>
                
            </ul>
        </li>
        
    
        
          
            <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
            
        
        
        
        <li class="sidebar-nav-item">
            <a  class="js-scroll-trigger"  href="/energy.html">HD-EMMA</a>
            <ul>
                
                <li class="sidebar-nav-item text-white"><a  class="js-scroll-trigger"  href="/energy/aaai21.html">AAAI-21 paper</a></li>
                
            </ul>
        </li>
        
    
        
          
            <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
            
        
        
        
        <li  class="sidebar-nav-item" ><a  class="js-scroll-trigger"  href="/publications/">Publications</a></li>
        
    
        
          
            <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
            
        
        
        
        <li  class="sidebar-nav-item" ><a  class="js-scroll-trigger"  href="/talks/">Talks</a></li>
        
    
        
          
            <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
            
        
        
        
        <li  class="sidebar-nav-item" ><a  class="js-scroll-trigger"  href="/energydashboard/">CARTA Energy Dashboard</a></li>
        
    
        
          
            <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
            
        
        
        
        <li  class="sidebar-nav-item" ><a  class="js-scroll-trigger"  href="/wegodashboard/">WeGo Occupancy Dashboard</a></li>
        
    
        
          
            <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
            
        
        
        
        <li  class="sidebar-nav-item" ><a  class="js-scroll-trigger"  href="/cartadashboard/">CARTA Occupancy Dashboard</a></li>
        
    
        
          
            <!-- We have to declare it 'null' to ensure it doesn't propagate. -->
            
        
        
        
        <li  class="sidebar-nav-item" ><a  class="js-scroll-trigger"  href="/post/">Posts</a></li>
        
    
    </ul>
</nav>

    





<main>
<div class="container-fluid d-flex justify-content-center p-0 m-0">
<div class="content-section col-lg-12 col-xl-8  text-justify">   <h1 id="calculatechargeipynb">CalculateCharge.ipynb</h1>

<p>At first we remove the records when the bus is in around 400meters of the garage.
Then we remove the records when the charging cable connection of the bus is set to one, which implies that the bus is charging
Finally, we calculate charge based on Battery Current and Battery Voltage.</p>

<h1 id="dataprep_for_mappingipynb">DataPrep_for_Mapping.ipynb</h1>

<p>For each recorded location from the viriciti, we gather the nearby road segments and then we pick one road segment from the set of candidates.
This script handles with the data preparation for feeding into the mapping prediction model.</p>

<h1 id="ml_for_mapmatchingipynb">ML_for_MapMatching.ipynb</h1>

<p>Here we feed the candidate road segments to the prediction model and finally generate the dataset with each location mapped to and OSM Street.</p>

<h1 id="generating_samplesipynb">Generating_Samples.ipynb</h1>

<p>Here we generate the locations to training samples based on travel on continuous road segment. For each sample, we calculate distance traveled, time taken, charge consumed etc.
We also one-hot encode the different road types. Then we also prepare samples when the vehicle is turning between different road segments. Finally, we remove the outlier samples.</p>

<h1 id="addingelevationipynb">addingElevation.ipynb</h1>

<p>Here, we aggregate elevation for starting and ending location of each sample.</p>

<h1 id="addhourlyweatheripynb">addHourlyWeather.ipynb</h1>

<p>We aggregate hourly average of different weather parameters (humidity, temperature, visibility, etc.)</p>

<h1 id="addinghourlytrafficipynb">addingHourlyTraffic.ipynb</h1>

<p>At first, we map each OSM segment to TMC segments. Then using the TMC segments, we aggregate hourly traffic condition. 
We add two features from our traffic dataset to each sample: speed ratio and jam factor. 
Speed ratio is the actual traffic speed over the free-flow speed.
Jam factor indicates the expected quality of travel, ranging from 0
(light or no traffic) to 10 (road closure).</p>

<h1 id="modifying_samples_before_trainingipynb">Modifying_Samples_before_Training.ipynb</h1>

<p>Here, we drop unnecessary columns and rearrange the dataset before feeding into the prediction model.</p>
 </div>
</div> 
 </main>




    
    
 <footer class="footer text-center">
    <div class="container">
      <ul class="list-inline mb-5">
         
              
        
        <li class="list-inline-item">
          <a class="social-link rounded-circle text-white" href="http://github.com/SmartTransit-ai">
            <i class="icon-social-github"></i>
          </a>
        </li>
        
      </ul>
      <p class="text-muted small mb-0">Copyright &copy; <a href="https://scopelab.ai">ScopeLab</a> 2020</p>
    </div>
  </footer>
   

      <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded js-scroll-trigger" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

    
 <!-- Bootstrap core JavaScript -->
 <script src="https://SmartTransit.ai/js/jquery/jquery.min.js"></script>
 <script src="https://SmartTransit.ai/js/bootstrap/js/bootstrap.bundle.min.js"></script>

 <!-- Plugin JavaScript -->
 <script src="https://SmartTransit.ai/js/jquery-easing/jquery.easing.min.js"></script>

 <!-- Custom scripts for this template -->
 <script src="https://SmartTransit.ai/js/stylish-portfolio.min.js"></script>

 

  </body>
</html>
